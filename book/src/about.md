# About this book

This book is written in Markdown and is generated by
[mdBook](https://github.com/rust-lang/mdBook/).

Included figures and code blocks are generated by *crate examples*, which are
located in the `examples/` directory of this repository.
Running the test suite with `cargo test --examples` will compile each of these
examples and run any `#[test]` functions that they contain.

Examples that generate figures have `#[test]` functions that set the working
directory to one of the book `src/` sub-directories and then call the example
`main()` function to generate each figure:

```rust,no_run,noplayground
#[test]
fn run_test() -> Result<(), SomeError> {
    let dev_guide_dir = std::path::Path::new("./book/src/dev_guide");
    assert!(std::env::set_current_dir(&dev_guide_dir).is_ok());
    main()
}

fn main() -> Result<(), SomeError> {
    // Generate figures here
    Ok(())
}
```

Note that the updated working directory is defined relative to the repository
root directory.
Also note that each of these examples must set the `test` field to `true` in
`Cargo.toml`:

```toml
[[example]]
name = "example_name"
test = true
```
